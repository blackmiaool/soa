<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>test page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="blackmiaool's page">
    <meta name="author" content="blackmiaool">
    <script src="js/less.min.js"></script>
    <script src="../js/jquery-3.2.0.js"></script>
</head>

<body>
    <button id="next">Next</button>
    <textarea id="output" placeholder="output" style="height:230px;width:230px;">
       
   </textarea>
    <script type="text/javascript">        
        var preOpen = XMLHttpRequest.prototype.open;
        XMLHttpRequest.prototype.open = function(method, url) {
            var args = Array.prototype.slice.call(arguments, 0);
            if (url.match(/\.less$/)) {
                url += `?time=${Date.now()}`;
                args[1]=url;
            }            
            return preOpen.apply(this, args);
        }

        function update() {

            $.get("./test/main.less", function(mainFileContent) {
                less.render(mainFileContent, {
                        filename: "./test/main.less",
                        useFileCache: false
                    })
                    .then(function(output) {
                        $("#output").val(output.css);
                        console.log(output);
                    })
            });
        }
        update();
        $("#next").on("click", update);
    </script>
</body>